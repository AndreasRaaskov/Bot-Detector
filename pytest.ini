# pytest.ini - Pytest configuration file
# This file configures how pytest runs tests for the Bot Detector project

[tool:pytest]
# Minimum Python version required
minversion = 6.0

# Test discovery patterns
# pytest will look for these patterns when finding tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Default test paths
# Run tests from the tests directory
testpaths = 
    tests

# Python path configuration
# Add backend directory to Python path so tests can import modules
pythonpath = backend

# Addopts - additional options passed to pytest by default
addopts = 
    # Show detailed output for failed tests
    -v
    # Show local variables in tracebacks (helpful for debugging)
    -l
    # Show summary of all tests (not just failures)
    -ra
    # Enable strict mode for markers (prevents typos in marker names)
    --strict-markers
    # Show warnings summary
    --disable-warnings
    # Fail if any tests are marked as expected to fail but actually pass
    --strict-config

# Custom markers
# These can be used to categorize and selectively run tests
markers =
    unit: Unit tests that test individual components in isolation
    integration: Integration tests that test component interactions
    api: API endpoint tests
    slow: Tests that take a long time to run
    requires_network: Tests that require internet connectivity
    requires_credentials: Tests that need real API credentials

# Filterwarnings
# Configure how pytest handles warnings
filterwarnings =
    # Ignore specific warnings that we can't control
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    # Convert specific warnings to errors (helps catch issues early)
    error::UserWarning

# Asyncio configuration
# Since our app is async, configure asyncio test support
asyncio_mode = auto

# Test timeout (in seconds)
# Prevent tests from hanging indefinitely
timeout = 300